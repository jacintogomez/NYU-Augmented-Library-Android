{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport React, { useCallback, useEffect, useMemo, useRef } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport min from 'lodash/min';\nimport map from 'lodash/map';\nimport constants from \"../commons/constants\";\nimport styleConstructor, { HOURS_SIDEBAR_WIDTH } from \"./style\";\nimport { populateEvents, HOUR_BLOCK_HEIGHT } from \"./Packer\";\nimport { calcTimeOffset } from \"./helpers/presenter\";\nimport TimelineHours from \"./TimelineHours\";\nimport EventBlock from \"./EventBlock\";\nimport NowIndicator from \"./NowIndicator\";\nimport useTimelineOffset from \"./useTimelineOffset\";\nvar Timeline = function Timeline(props) {\n  var _props$format24h = props.format24h,\n    format24h = _props$format24h === void 0 ? true : _props$format24h,\n    _props$start = props.start,\n    start = _props$start === void 0 ? 0 : _props$start,\n    _props$end = props.end,\n    end = _props$end === void 0 ? 24 : _props$end,\n    date = props.date,\n    _props$events = props.events,\n    events = _props$events === void 0 ? [] : _props$events,\n    onEventPress = props.onEventPress,\n    onBackgroundLongPress = props.onBackgroundLongPress,\n    onBackgroundLongPressOut = props.onBackgroundLongPressOut,\n    renderEvent = props.renderEvent,\n    theme = props.theme,\n    scrollToFirst = props.scrollToFirst,\n    scrollToNow = props.scrollToNow,\n    initialTime = props.initialTime,\n    showNowIndicator = props.showNowIndicator,\n    scrollOffset = props.scrollOffset,\n    onChangeOffset = props.onChangeOffset,\n    overlapEventsSpacing = props.overlapEventsSpacing,\n    rightEdgeSpacing = props.rightEdgeSpacing,\n    unavailableHours = props.unavailableHours,\n    unavailableHoursColor = props.unavailableHoursColor,\n    eventTapped = props.eventTapped;\n  var scrollView = useRef();\n  var calendarHeight = useRef((end - start) * HOUR_BLOCK_HEIGHT);\n  var styles = useRef(styleConstructor(theme || props.styles, calendarHeight.current));\n  var _useTimelineOffset = useTimelineOffset({\n      onChangeOffset: onChangeOffset,\n      scrollOffset: scrollOffset,\n      scrollViewRef: scrollView\n    }),\n    scrollEvents = _useTimelineOffset.scrollEvents;\n  var packedEvents = useMemo(function () {\n    var width = constants.screenWidth - HOURS_SIDEBAR_WIDTH;\n    return populateEvents(events, {\n      screenWidth: width,\n      dayStart: start,\n      overlapEventsSpacing: overlapEventsSpacing,\n      rightEdgeSpacing: rightEdgeSpacing\n    });\n  }, [events, start]);\n  useEffect(function () {\n    var initialPosition = 0;\n    if (scrollToNow) {\n      initialPosition = calcTimeOffset(HOUR_BLOCK_HEIGHT);\n    } else if (scrollToFirst && packedEvents.length > 0) {\n      var _min;\n      initialPosition = (_min = min(map(packedEvents, 'top'))) != null ? _min : 0;\n    } else if (initialTime) {\n      initialPosition = calcTimeOffset(HOUR_BLOCK_HEIGHT, initialTime.hour, initialTime.minutes);\n    }\n    if (initialPosition) {\n      setTimeout(function () {\n        var _scrollView$current;\n        scrollView == null ? void 0 : (_scrollView$current = scrollView.current) == null ? void 0 : _scrollView$current.scrollTo({\n          y: Math.max(0, initialPosition - HOUR_BLOCK_HEIGHT),\n          animated: true\n        });\n      }, 0);\n    }\n  }, []);\n  var _onEventPress = useCallback(function (eventIndex) {\n    var event = packedEvents[eventIndex];\n    if (eventTapped) {\n      eventTapped(event);\n    } else {\n      onEventPress == null ? void 0 : onEventPress(event);\n    }\n  }, [packedEvents, onEventPress, eventTapped]);\n  var renderEvents = function renderEvents() {\n    var events = packedEvents.map(function (event, i) {\n      return React.createElement(EventBlock, {\n        key: i,\n        index: i,\n        event: event,\n        styles: styles.current,\n        format24h: format24h,\n        onPress: _onEventPress,\n        renderEvent: renderEvent\n      });\n    });\n    return React.createElement(View, null, React.createElement(View, {\n      style: {\n        marginLeft: HOURS_SIDEBAR_WIDTH\n      }\n    }, events));\n  };\n  return React.createElement(ScrollView\n  , _extends({\n    ref: scrollView,\n    contentContainerStyle: [styles.current.contentStyle, {\n      width: constants.screenWidth\n    }]\n  }, scrollEvents), React.createElement(TimelineHours, {\n    start: start,\n    end: end,\n    date: date,\n    format24h: format24h,\n    styles: styles.current,\n    unavailableHours: unavailableHours,\n    unavailableHoursColor: unavailableHoursColor,\n    onBackgroundLongPress: onBackgroundLongPress,\n    onBackgroundLongPressOut: onBackgroundLongPressOut\n  }), renderEvents(), showNowIndicator && React.createElement(NowIndicator, {\n    styles: styles.current\n  }));\n};\nexport default React.memo(Timeline);","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useRef","min","map","constants","styleConstructor","HOURS_SIDEBAR_WIDTH","populateEvents","HOUR_BLOCK_HEIGHT","calcTimeOffset","TimelineHours","EventBlock","NowIndicator","useTimelineOffset","Timeline","props","format24h","start","end","date","events","onEventPress","onBackgroundLongPress","onBackgroundLongPressOut","renderEvent","theme","scrollToFirst","scrollToNow","initialTime","showNowIndicator","scrollOffset","onChangeOffset","overlapEventsSpacing","rightEdgeSpacing","unavailableHours","unavailableHoursColor","eventTapped","scrollView","calendarHeight","styles","current","scrollViewRef","scrollEvents","packedEvents","width","screenWidth","dayStart","initialPosition","length","hour","minutes","setTimeout","scrollTo","y","Math","max","animated","_onEventPress","eventIndex","event","renderEvents","i","marginLeft","contentStyle","memo"],"sources":["C:/Users/letha/WebstormProjects/NYU-Library-Frontend/node_modules/react-native-calendars/src/timeline/Timeline.js"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef } from 'react';\nimport { View, ScrollView } from 'react-native';\nimport min from 'lodash/min';\nimport map from 'lodash/map';\nimport constants from '../commons/constants';\nimport styleConstructor, { HOURS_SIDEBAR_WIDTH } from './style';\nimport { populateEvents, HOUR_BLOCK_HEIGHT } from './Packer';\nimport { calcTimeOffset } from './helpers/presenter';\nimport TimelineHours from './TimelineHours';\nimport EventBlock from './EventBlock';\nimport NowIndicator from './NowIndicator';\nimport useTimelineOffset from './useTimelineOffset';\nconst Timeline = (props) => {\n    const { format24h = true, start = 0, end = 24, date, events = [], onEventPress, onBackgroundLongPress, onBackgroundLongPressOut, renderEvent, theme, scrollToFirst, scrollToNow, initialTime, showNowIndicator, scrollOffset, onChangeOffset, overlapEventsSpacing, rightEdgeSpacing, unavailableHours, unavailableHoursColor, eventTapped } = props;\n    const scrollView = useRef();\n    const calendarHeight = useRef((end - start) * HOUR_BLOCK_HEIGHT);\n    const styles = useRef(styleConstructor(theme || props.styles, calendarHeight.current));\n    const { scrollEvents } = useTimelineOffset({ onChangeOffset, scrollOffset, scrollViewRef: scrollView });\n    const packedEvents = useMemo(() => {\n        const width = constants.screenWidth - HOURS_SIDEBAR_WIDTH;\n        return populateEvents(events, { screenWidth: width, dayStart: start, overlapEventsSpacing, rightEdgeSpacing });\n    }, [events, start]);\n    useEffect(() => {\n        let initialPosition = 0;\n        if (scrollToNow) {\n            initialPosition = calcTimeOffset(HOUR_BLOCK_HEIGHT);\n        }\n        else if (scrollToFirst && packedEvents.length > 0) {\n            initialPosition = min(map(packedEvents, 'top')) ?? 0;\n        }\n        else if (initialTime) {\n            initialPosition = calcTimeOffset(HOUR_BLOCK_HEIGHT, initialTime.hour, initialTime.minutes);\n        }\n        if (initialPosition) {\n            setTimeout(() => {\n                scrollView?.current?.scrollTo({\n                    y: Math.max(0, initialPosition - HOUR_BLOCK_HEIGHT),\n                    animated: true\n                });\n            }, 0);\n        }\n    }, []);\n    const _onEventPress = useCallback((eventIndex) => {\n        const event = packedEvents[eventIndex];\n        if (eventTapped) {\n            //TODO: remove after deprecation\n            eventTapped(event);\n        }\n        else {\n            onEventPress?.(event);\n        }\n    }, [packedEvents, onEventPress, eventTapped]);\n    const renderEvents = () => {\n        const events = packedEvents.map((event, i) => {\n            return (<EventBlock key={i} index={i} event={event} styles={styles.current} format24h={format24h} onPress={_onEventPress} renderEvent={renderEvent}/>);\n        });\n        return (<View>\n        <View style={{ marginLeft: HOURS_SIDEBAR_WIDTH }}>{events}</View>\n      </View>);\n    };\n    return (<ScrollView \n    // @ts-expect-error\n    ref={scrollView} contentContainerStyle={[styles.current.contentStyle, { width: constants.screenWidth }]} {...scrollEvents}>\n      <TimelineHours start={start} end={end} date={date} format24h={format24h} styles={styles.current} unavailableHours={unavailableHours} unavailableHoursColor={unavailableHoursColor} onBackgroundLongPress={onBackgroundLongPress} onBackgroundLongPressOut={onBackgroundLongPressOut}/>\n      {renderEvents()}\n      {showNowIndicator && <NowIndicator styles={styles.current}/>}\n    </ScrollView>);\n};\nexport default React.memo(Timeline);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}