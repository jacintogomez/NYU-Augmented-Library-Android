{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport XDate from 'xdate';\nimport React, { forwardRef, useImperativeHandle, useEffect, useRef, useState, useContext, useCallback } from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { getDefaultLocale } from \"../../services\";\nimport { toMarkingFormat } from \"../../interface\";\nimport { isToday, isPastDate } from \"../../dateutils\";\nimport { UpdateSources, todayString } from \"../commons\";\nimport styleConstructor from \"../style\";\nimport Context from \"./index\";\nvar TOP_POSITION = 65;\nvar DOWN_ICON = require(\"../../img/down.png\");\nvar UP_ICON = require(\"../../img/up.png\");\nvar TodayButton = function TodayButton(props, ref) {\n  useImperativeHandle(ref, function () {\n    return {\n      disable: function disable(shouldDisable) {\n        _disable(shouldDisable);\n      }\n    };\n  });\n  var _props$margin = props.margin,\n    margin = _props$margin === void 0 ? 0 : _props$margin,\n    _props$disabledOpacit = props.disabledOpacity,\n    disabledOpacity = _props$disabledOpacit === void 0 ? 0.3 : _props$disabledOpacit,\n    theme = props.theme,\n    propsStyle = props.style;\n  var _useContext = useContext(Context),\n    date = _useContext.date,\n    setDate = _useContext.setDate;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    disabled = _useState2[0],\n    setDisabled = _useState2[1];\n  var style = useRef(styleConstructor(theme));\n  var state = isToday(date) ? 0 : isPastDate(date) ? -1 : 1;\n  var shouldShow = state !== 0;\n  useEffect(function () {\n    if (shouldShow) {\n      setButtonIcon(getButtonIcon());\n    }\n    animatePosition();\n  }, [state]);\n  useEffect(function () {\n    if (!shouldShow) {\n      return;\n    }\n    animateOpacity();\n  }, [disabled]);\n  var _disable = function _disable(shouldDisable) {\n    if (shouldDisable !== disabled) {\n      setDisabled(shouldDisable);\n    }\n  };\n  var getFormattedLabel = function getFormattedLabel() {\n    var todayStr = getDefaultLocale().today || todayString;\n    var today = todayStr.charAt(0).toUpperCase() + todayStr.slice(1);\n    return today;\n  };\n  var today = useRef(getFormattedLabel());\n  var getButtonIcon = function getButtonIcon() {\n    if (shouldShow) {\n      return state === 1 ? UP_ICON : DOWN_ICON;\n    }\n  };\n  var _useState3 = useState(getButtonIcon()),\n    _useState4 = _slicedToArray(_useState3, 2),\n    buttonIcon = _useState4[0],\n    setButtonIcon = _useState4[1];\n  var buttonY = useRef(new Animated.Value(margin ? -margin : -TOP_POSITION));\n  var opacity = useRef(new Animated.Value(1));\n  var getPositionAnimation = function getPositionAnimation() {\n    var toValue = state === 0 ? TOP_POSITION : -margin || -TOP_POSITION;\n    return {\n      toValue: toValue,\n      tension: 30,\n      friction: 8,\n      useNativeDriver: true\n    };\n  };\n  var getOpacityAnimation = function getOpacityAnimation() {\n    return {\n      toValue: disabled ? disabledOpacity : 1,\n      duration: 500,\n      useNativeDriver: true\n    };\n  };\n  var animatePosition = function animatePosition() {\n    var animationData = getPositionAnimation();\n    Animated.spring(buttonY.current, _objectSpread({}, animationData)).start();\n  };\n  var animateOpacity = function animateOpacity() {\n    var animationData = getOpacityAnimation();\n    Animated.timing(opacity.current, _objectSpread({}, animationData)).start();\n  };\n  var getTodayDate = function getTodayDate() {\n    return toMarkingFormat(new XDate());\n  };\n  var onPress = useCallback(function () {\n    setDate(getTodayDate(), UpdateSources.TODAY_PRESS);\n  }, [setDate]);\n  return React.createElement(Animated.View, {\n    style: [style.current.todayButtonContainer, {\n      transform: [{\n        translateY: buttonY.current\n      }]\n    }]\n  }, React.createElement(TouchableOpacity, {\n    style: [style.current.todayButton, propsStyle],\n    onPress: onPress,\n    disabled: disabled\n  }, React.createElement(Animated.Image, {\n    style: [style.current.todayButtonImage, {\n      opacity: opacity.current\n    }],\n    source: buttonIcon\n  }), React.createElement(Animated.Text, {\n    allowFontScaling: false,\n    style: [style.current.todayButtonText, {\n      opacity: opacity.current\n    }]\n  }, today.current)));\n};\nexport default forwardRef(TodayButton);","map":{"version":3,"names":["XDate","React","forwardRef","useImperativeHandle","useEffect","useRef","useState","useContext","useCallback","Animated","TouchableOpacity","getDefaultLocale","toMarkingFormat","isToday","isPastDate","UpdateSources","todayString","styleConstructor","Context","TOP_POSITION","DOWN_ICON","require","UP_ICON","TodayButton","props","ref","disable","shouldDisable","_props$margin","margin","_props$disabledOpacit","disabledOpacity","theme","propsStyle","style","_useContext","date","setDate","_useState","_useState2","_slicedToArray","disabled","setDisabled","state","shouldShow","setButtonIcon","getButtonIcon","animatePosition","animateOpacity","getFormattedLabel","todayStr","today","charAt","toUpperCase","slice","_useState3","_useState4","buttonIcon","buttonY","Value","opacity","getPositionAnimation","toValue","tension","friction","useNativeDriver","getOpacityAnimation","duration","animationData","spring","current","_objectSpread","start","timing","getTodayDate","onPress","TODAY_PRESS","createElement","View","todayButtonContainer","transform","translateY","todayButton","Image","todayButtonImage","source","Text","allowFontScaling","todayButtonText"],"sources":["/Users/siyuejiang/Documents/S23/Augmented Library 2/node_modules/react-native-calendars/src/expandableCalendar/Context/todayButton.js"],"sourcesContent":["import XDate from 'xdate';\nimport React, { forwardRef, useImperativeHandle, useEffect, useRef, useState, useContext, useCallback } from 'react';\nimport { Animated, TouchableOpacity } from 'react-native';\nimport { getDefaultLocale } from '../../services';\nimport { toMarkingFormat } from '../../interface';\nimport { isToday, isPastDate } from '../../dateutils';\nimport { UpdateSources, todayString } from '../commons';\nimport styleConstructor from '../style';\nimport Context from './index';\nconst TOP_POSITION = 65;\nconst DOWN_ICON = require('../../img/down.png');\nconst UP_ICON = require('../../img/up.png');\nconst TodayButton = (props, ref) => {\n    useImperativeHandle(ref, () => ({\n        disable: (shouldDisable) => {\n            disable(shouldDisable);\n        }\n    }));\n    const { margin = 0, disabledOpacity = 0.3, theme, style: propsStyle, } = props;\n    const { date, setDate } = useContext(Context);\n    const [disabled, setDisabled] = useState(false);\n    const style = useRef(styleConstructor(theme));\n    const state = isToday(date) ? 0 : isPastDate(date) ? -1 : 1;\n    const shouldShow = state !== 0;\n    /** Effects */\n    useEffect(() => {\n        if (shouldShow) {\n            setButtonIcon(getButtonIcon());\n        }\n        animatePosition();\n    }, [state]);\n    useEffect(() => {\n        if (!shouldShow) {\n            return;\n        }\n        animateOpacity();\n    }, [disabled]);\n    const disable = (shouldDisable) => {\n        if (shouldDisable !== disabled) {\n            setDisabled(shouldDisable);\n        }\n    };\n    /** Label */\n    const getFormattedLabel = () => {\n        const todayStr = getDefaultLocale().today || todayString;\n        const today = todayStr.charAt(0).toUpperCase() + todayStr.slice(1);\n        return today;\n    };\n    const today = useRef(getFormattedLabel());\n    /** Icon */\n    const getButtonIcon = () => {\n        if (shouldShow) {\n            return state === 1 ? UP_ICON : DOWN_ICON;\n        }\n    };\n    const [buttonIcon, setButtonIcon] = useState(getButtonIcon());\n    /** Animations */\n    const buttonY = useRef(new Animated.Value(margin ? -margin : -TOP_POSITION));\n    const opacity = useRef(new Animated.Value(1));\n    const getPositionAnimation = () => {\n        const toValue = state === 0 ? TOP_POSITION : -margin || -TOP_POSITION;\n        return {\n            toValue,\n            tension: 30,\n            friction: 8,\n            useNativeDriver: true\n        };\n    };\n    const getOpacityAnimation = () => {\n        return {\n            toValue: disabled ? disabledOpacity : 1,\n            duration: 500,\n            useNativeDriver: true\n        };\n    };\n    const animatePosition = () => {\n        const animationData = getPositionAnimation();\n        Animated.spring(buttonY.current, {\n            ...animationData\n        }).start();\n    };\n    const animateOpacity = () => {\n        const animationData = getOpacityAnimation();\n        Animated.timing(opacity.current, {\n            ...animationData\n        }).start();\n    };\n    const getTodayDate = () => {\n        return toMarkingFormat(new XDate());\n    };\n    const onPress = useCallback(() => {\n        setDate(getTodayDate(), UpdateSources.TODAY_PRESS);\n    }, [setDate]);\n    return (<Animated.View style={[style.current.todayButtonContainer, { transform: [{ translateY: buttonY.current }] }]}>\n      <TouchableOpacity style={[style.current.todayButton, propsStyle]} onPress={onPress} disabled={disabled}>\n        <Animated.Image style={[style.current.todayButtonImage, { opacity: opacity.current }]} source={buttonIcon}/>\n        <Animated.Text allowFontScaling={false} style={[style.current.todayButtonText, { opacity: opacity.current }]}>\n          {today.current}\n        </Animated.Text>\n      </TouchableOpacity>\n    </Animated.View>);\n};\nexport default forwardRef(TodayButton);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}