{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { forwardRef, useCallback, useEffect, useMemo, useRef } from 'react';\nimport { DataProvider, LayoutProvider, RecyclerListView } from 'recyclerlistview';\nimport inRange from 'lodash/inRange';\nimport debounce from 'lodash/debounce';\nimport noop from 'lodash/noop';\nimport constants from \"../commons/constants\";\nimport useCombinedRefs from \"../commons/useCombinedRefs\";\nvar dataProviderMaker = function dataProviderMaker(items) {\n  return new DataProvider(function (item1, item2) {\n    return item1 !== item2;\n  }).cloneWithRows(items);\n};\nvar InfiniteList = function InfiniteList(props, ref) {\n  var renderItem = props.renderItem,\n    data = props.data,\n    _props$reloadPages = props.reloadPages,\n    reloadPages = _props$reloadPages === void 0 ? noop : _props$reloadPages,\n    _props$pageWidth = props.pageWidth,\n    pageWidth = _props$pageWidth === void 0 ? constants.screenWidth : _props$pageWidth,\n    _props$pageHeight = props.pageHeight,\n    pageHeight = _props$pageHeight === void 0 ? constants.screenHeight : _props$pageHeight,\n    onPageChange = props.onPageChange,\n    onReachEdge = props.onReachEdge,\n    onReachNearEdge = props.onReachNearEdge,\n    onReachNearEdgeThreshold = props.onReachNearEdgeThreshold,\n    _props$initialPageInd = props.initialPageIndex,\n    initialPageIndex = _props$initialPageInd === void 0 ? 0 : _props$initialPageInd,\n    extendedState = props.extendedState,\n    scrollViewProps = props.scrollViewProps;\n  var dataProvider = useMemo(function () {\n    return dataProviderMaker(data);\n  }, [data]);\n  var layoutProvider = useRef(new LayoutProvider(function () {\n    return 'page';\n  }, function (_type, dim) {\n    dim.width = pageWidth;\n    dim.height = pageHeight;\n  }));\n  var listRef = useCombinedRefs(ref);\n  var pageIndex = useRef();\n  var isOnEdge = useRef(false);\n  var isNearEdge = useRef(false);\n  var scrolledByUser = useRef(false);\n  var reloadPagesDebounce = useCallback(debounce(reloadPages, 500, {\n    leading: false,\n    trailing: true\n  }), [reloadPages]);\n  useEffect(function () {\n    setTimeout(function () {\n      var _listRef$current;\n      (_listRef$current = listRef.current) == null ? void 0 : _listRef$current.scrollToOffset == null ? void 0 : _listRef$current.scrollToOffset(Math.floor(data.length / 2) * pageWidth, 0, false);\n    }, 0);\n  }, [data]);\n  var onScroll = useCallback(function (event, offsetX, offsetY) {\n    reloadPagesDebounce == null ? void 0 : reloadPagesDebounce.cancel();\n    var newPageIndex = Math.round(event.nativeEvent.contentOffset.x / pageWidth);\n    if (pageIndex.current !== newPageIndex) {\n      if (pageIndex.current !== undefined) {\n        onPageChange == null ? void 0 : onPageChange(newPageIndex, pageIndex.current, {\n          scrolledByUser: scrolledByUser.current\n        });\n        scrolledByUser.current = false;\n        isOnEdge.current = false;\n        isNearEdge.current = false;\n        if (newPageIndex === 0 || newPageIndex === data.length - 1) {\n          isOnEdge.current = true;\n        } else if (onReachNearEdgeThreshold && !inRange(newPageIndex, onReachNearEdgeThreshold, data.length - onReachNearEdgeThreshold)) {\n          isNearEdge.current = true;\n        }\n      }\n      pageIndex.current = newPageIndex;\n    }\n    props.onScroll == null ? void 0 : props.onScroll(event, offsetX, offsetY);\n  }, [props.onScroll, onPageChange, data.length, reloadPagesDebounce]);\n  var onMomentumScrollEnd = useCallback(function (event) {\n    if (isOnEdge.current) {\n      onReachEdge == null ? void 0 : onReachEdge(pageIndex.current);\n      reloadPagesDebounce == null ? void 0 : reloadPagesDebounce(pageIndex.current);\n    } else if (isNearEdge.current) {\n      reloadPagesDebounce == null ? void 0 : reloadPagesDebounce(pageIndex.current);\n      onReachNearEdge == null ? void 0 : onReachNearEdge(pageIndex.current);\n    }\n    scrollViewProps == null ? void 0 : scrollViewProps.onMomentumScrollEnd == null ? void 0 : scrollViewProps.onMomentumScrollEnd(event);\n  }, [scrollViewProps == null ? void 0 : scrollViewProps.onMomentumScrollEnd, onReachEdge, onReachNearEdge, reloadPagesDebounce]);\n  var onScrollBeginDrag = useCallback(function () {\n    scrolledByUser.current = true;\n  }, []);\n  var style = useMemo(function () {\n    return {\n      height: pageHeight\n    };\n  }, [pageHeight]);\n  return React.createElement(RecyclerListView\n  , {\n    ref: listRef,\n    isHorizontal: true,\n    rowRenderer: renderItem,\n    dataProvider: dataProvider,\n    layoutProvider: layoutProvider.current,\n    extendedState: extendedState,\n    initialRenderIndex: initialPageIndex,\n    renderAheadOffset: 5 * pageWidth,\n    onScroll: onScroll,\n    style: style,\n    scrollViewProps: _objectSpread(_objectSpread({\n      pagingEnabled: true,\n      bounces: false\n    }, scrollViewProps), {}, {\n      onScrollBeginDrag: onScrollBeginDrag,\n      onMomentumScrollEnd: onMomentumScrollEnd\n    })\n  });\n};\nexport default forwardRef(InfiniteList);","map":{"version":3,"names":["React","forwardRef","useCallback","useEffect","useMemo","useRef","DataProvider","LayoutProvider","RecyclerListView","inRange","debounce","noop","constants","useCombinedRefs","dataProviderMaker","items","item1","item2","cloneWithRows","InfiniteList","props","ref","renderItem","data","reloadPages","pageWidth","screenWidth","pageHeight","screenHeight","onPageChange","onReachEdge","onReachNearEdge","onReachNearEdgeThreshold","initialPageIndex","extendedState","scrollViewProps","dataProvider","layoutProvider","_type","dim","width","height","listRef","pageIndex","isOnEdge","isNearEdge","scrolledByUser","reloadPagesDebounce","leading","trailing","setTimeout","current","scrollToOffset","Math","floor","length","onScroll","event","offsetX","offsetY","cancel","newPageIndex","round","nativeEvent","contentOffset","x","undefined","onMomentumScrollEnd","onScrollBeginDrag","style","pagingEnabled","bounces"],"sources":["C:/Users/letha/WebstormProjects/NYU-Library-Frontend/node_modules/react-native-calendars/src/infinite-list/index.js"],"sourcesContent":["// TODO: Make this a common component for all horizontal lists in this lib\nimport React, { forwardRef, useCallback, useEffect, useMemo, useRef } from 'react';\nimport { DataProvider, LayoutProvider, RecyclerListView } from 'recyclerlistview';\nimport inRange from 'lodash/inRange';\nimport debounce from 'lodash/debounce';\nimport noop from 'lodash/noop';\nimport constants from '../commons/constants';\nimport useCombinedRefs from '../commons/useCombinedRefs';\nconst dataProviderMaker = (items) => new DataProvider((item1, item2) => item1 !== item2).cloneWithRows(items);\nconst InfiniteList = (props, ref) => {\n    const { renderItem, data, reloadPages = noop, pageWidth = constants.screenWidth, pageHeight = constants.screenHeight, onPageChange, onReachEdge, onReachNearEdge, onReachNearEdgeThreshold, initialPageIndex = 0, extendedState, scrollViewProps } = props;\n    const dataProvider = useMemo(() => {\n        return dataProviderMaker(data);\n    }, [data]);\n    const layoutProvider = useRef(new LayoutProvider(() => 'page', (_type, dim) => {\n        dim.width = pageWidth;\n        dim.height = pageHeight;\n    }));\n    const listRef = useCombinedRefs(ref);\n    const pageIndex = useRef();\n    const isOnEdge = useRef(false);\n    const isNearEdge = useRef(false);\n    const scrolledByUser = useRef(false);\n    const reloadPagesDebounce = useCallback(debounce(reloadPages, 500, { leading: false, trailing: true }), [reloadPages]);\n    useEffect(() => {\n        setTimeout(() => {\n            // @ts-expect-error\n            listRef.current?.scrollToOffset?.(Math.floor(data.length / 2) * pageWidth, 0, false);\n        }, 0);\n    }, [data]);\n    const onScroll = useCallback((event, offsetX, offsetY) => {\n        reloadPagesDebounce?.cancel();\n        const newPageIndex = Math.round(event.nativeEvent.contentOffset.x / pageWidth);\n        if (pageIndex.current !== newPageIndex) {\n            if (pageIndex.current !== undefined) {\n                onPageChange?.(newPageIndex, pageIndex.current, { scrolledByUser: scrolledByUser.current });\n                scrolledByUser.current = false;\n                isOnEdge.current = false;\n                isNearEdge.current = false;\n                if (newPageIndex === 0 || newPageIndex === data.length - 1) {\n                    isOnEdge.current = true;\n                }\n                else if (onReachNearEdgeThreshold &&\n                    !inRange(newPageIndex, onReachNearEdgeThreshold, data.length - onReachNearEdgeThreshold)) {\n                    isNearEdge.current = true;\n                }\n            }\n            pageIndex.current = newPageIndex;\n        }\n        props.onScroll?.(event, offsetX, offsetY);\n    }, [props.onScroll, onPageChange, data.length, reloadPagesDebounce]);\n    const onMomentumScrollEnd = useCallback(event => {\n        if (isOnEdge.current) {\n            onReachEdge?.(pageIndex.current);\n            reloadPagesDebounce?.(pageIndex.current);\n        }\n        else if (isNearEdge.current) {\n            reloadPagesDebounce?.(pageIndex.current);\n            onReachNearEdge?.(pageIndex.current);\n        }\n        scrollViewProps?.onMomentumScrollEnd?.(event);\n    }, [scrollViewProps?.onMomentumScrollEnd, onReachEdge, onReachNearEdge, reloadPagesDebounce]);\n    const onScrollBeginDrag = useCallback(() => {\n        scrolledByUser.current = true;\n    }, []);\n    const style = useMemo(() => {\n        return { height: pageHeight };\n    }, [pageHeight]);\n    return (<RecyclerListView \n    // @ts-expect-error\n    ref={listRef} isHorizontal rowRenderer={renderItem} dataProvider={dataProvider} layoutProvider={layoutProvider.current} extendedState={extendedState} initialRenderIndex={initialPageIndex} renderAheadOffset={5 * pageWidth} onScroll={onScroll} style={style} scrollViewProps={{\n            pagingEnabled: true,\n            bounces: false,\n            ...scrollViewProps,\n            onScrollBeginDrag,\n            onMomentumScrollEnd\n        }}/>);\n};\nexport default forwardRef(InfiniteList);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}